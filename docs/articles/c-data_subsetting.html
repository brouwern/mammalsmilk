<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
<ol start="3" style="list-style-type: upper-alpha">
<li>Data subsetting using dplyr</li>
</ol> • mammalsmilk</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="&lt;ol start=" style="list-style-type: upper-alpha">
</head>
<body>
<li>Data subsetting using dplyr</li>
" /&gt;

<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mammalsmilk</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a-introduction.html">a) Introduction to the mammals' milk case study</a>
    </li>
    <li>
      <a href="../articles/b1-data_access.html">b) Accessing mammalsmilk data</a>
    </li>
    <li>
      <a href="../articles/b2-data_cleaning.html">b) Data cleaning</a>
    </li>
    <li>
      <a href="../articles/c-data_subsetting.html">C) Data subsetting using dplyr</a>
    </li>
    <li>
      <a href="../articles/d-data_exploration.html">d) Data Exploration for Regression Analyses</a>
    </li>
    <li>
      <a href="../articles/e-PCA_data_vis.html">e) Data visualization &amp; exploration with PCA</a>
    </li>
    <li>
      <a href="../articles/f1-linear_reg_notes.html">f1) Linear regression notes</a>
    </li>
    <li>
      <a href="../articles/f2-linear_reg_fit_plot.html">f2) Running and plotting Linear Regression </a>
    </li>
    <li>
      <a href="../articles/f3-linear_reg_model_fit.html">f3) Linear regression as model fitting</a>
    </li>
    <li>
      <a href="../articles/g-linear_reg_diagnostics.html">g) Regression diagnostics &amp; Residual Analysis</a>
    </li>
    <li>
      <a href="../articles/r-regression_references.html">r) Regression references</a>
    </li>
    <li>
      <a href="../articles/y-creating_a_package.html">w) Creating this package</a>
    </li>
    <li>
      <a href="../articles/z-build_and_rebuild_package.html">Building and rebuilding vignettes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1><ol start="3" style="list-style-type: upper-alpha">
<li>Data subsetting using dplyr</li>
</ol></h1>
                        <h4 class="author">Nathan Brouwer</h4>
            
            <h4 class="date">2018-11-27</h4>
      
      
      <div class="hidden name"><code>c-data_subsetting.Rmd</code></div>

    </div>

    
    
<p>Make some subsets of the data without certain columns and certain rows.</p>
<div id="packages" class="section level3">
<h3 class="hasAnchor">
<a href="#packages" class="anchor"></a>Packages</h3>
<p>We’ll use the following packages. You’ll need to download them if you haven’t already. I’d try just loading them with library() first (in the next section), then installing if needed.</p>
<div id="download-packages" class="section level4">
<h4 class="hasAnchor">
<a href="#download-packages" class="anchor"></a>Download packages</h4>
<p>Only run this code if you haven’t already download these packages. You can run it by removing the “#” in front of the code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#install.package("here")</span>
<span class="co">#install.package("RCurl")</span></code></pre></div>
</div>
<div id="load-packages" class="section level4">
<h4 class="hasAnchor">
<a href="#load-packages" class="anchor"></a>Load packages</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(here)</code></pre></div>
<pre><code>## here() starts at C:/Users/lisanjie/Documents/1_R/git/mammalsmilk</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RCurl)</code></pre></div>
<pre><code>## Loading required package: bitops</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">library</span>(dplyr)</code></pre></div>
<pre><code>## 
## Attaching package: 'dplyr'</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union</code></pre>
</div>
</div>
<div id="loading-the-mammalsmilk-package" class="section level3">
<h3 class="hasAnchor">
<a href="#loading-the-mammalsmilk-package" class="anchor"></a>Loading the mammalsmilk package</h3>
<p>If you haven’t already, download the mammalsmilk package from GitHub (note the “S” between mammal and milk). This is commented out in the code below - only run the code if you have never downloaded it before, or haven’t recently (in case its been updated)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install_github("brouwern/mammalsmilk")</span></code></pre></div>
<p>You can then load the package with library()</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(mammalsmilk)</code></pre></div>
</div>
<div id="load-data" class="section level2">
<h2 class="hasAnchor">
<a href="#load-data" class="anchor"></a>Load data</h2>
<p>We’ll start with data the has the major issues cleaned up. This was done in the preceding data cleaning vignette. You can load it just from the package (shown first) or you can try to load the data from your hard drive (shown second).</p>
<p>Within the package, these data are just called “milk”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">"milk"</span>)</code></pre></div>
<p>There are many ways to get data in R. If you want to load the data from your hard drive using the here package as discssed in the data access vignette, your code might look like this..</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#file name of cleaned data we want to subset</span>
file. &lt;-<span class="st"> "skibiel_mammalsmilk.csv"</span>

<span class="co">#full path</span>
## <span class="al">NOTE</span>: this will be particular to YOUR computer
full.path &lt;-<span class="st"> </span>here<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/here/topics/here">here</a></span>(<span class="st">"inst/extdata"</span>, <span class="co">#folder</span>
                        file.)  <span class="co">#file name</span>

<span class="co"># load the data</span>
milk &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> full.path)</code></pre></div>
<p>Check</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(milk)</code></pre></div>
<pre><code>## [1] 130  19</code></pre>
</div>
<div id="remove-columns-from-a-dataframe" class="section level2">
<h2 class="hasAnchor">
<a href="#remove-columns-from-a-dataframe" class="anchor"></a>Remove columns from a dataframe</h2>
<p>The “N” column indicates sample size used in the original paper where the data came from and and isn’t needed. Also, for many analyses we’ll fous on fat, so we’ll drop the other columns.</p>
<p>We can drop columns using the synatx “select(-column.name)”; note</p>
<ol style="list-style-type: decimal">
<li>the minus sign (“-”) preceding the column name</li>
<li>the column name isn’t in quotes</li>
</ol>
<p>We can do multiple columns by just seperating the names with a comma, including a “-” for each one. (note, no “c(…)” needed!)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">milk_fat &lt;-<span class="st"> </span>milk <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span>N,
                                  <span class="op">-</span>prot,
                                  <span class="op">-</span>sugar,
                                  <span class="op">-</span>energy)</code></pre></div>
<p>We can save this sub-dataset for easy access</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#file name</span>
file. &lt;-<span class="st"> "skibiel_fat.csv"</span>

<span class="co"># full path</span>
## note: this will be particular to your computer!
full.path &lt;-<span class="st"> </span>here<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/here/topics/here">here</a></span>(<span class="st">"inst/extdata"</span>, <span class="co">#folder</span>
                        file.)  <span class="co">#file name</span>

<span class="kw">write.csv</span>(milk_fat,
          <span class="dt">file =</span> full.path,
          <span class="dt">row.names =</span>F)</code></pre></div>
<p>These data are also stored within the mammalsmilk package and can be accerssed directly using library(“milk_fat”)</p>
</div>
<div id="filter-by-rows" class="section level2">
<h2 class="hasAnchor">
<a href="#filter-by-rows" class="anchor"></a>Filter by rows</h2>
<p>For some analyses we’ll focus on just primates and their close-ish relatives. The filter() command lets us just slect the rows we want.</p>
<p>First, let’s make a vector of the names of the taxonomic orders we want</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">primates.order.and.friends &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Rodentia"</span>,<span class="st">"Primates"</span>,<span class="st">"Lagomorpha"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">milk_primates &lt;-<span class="st">  </span>milk_fat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(ord <span class="op">%in%</span><span class="st"> </span>primates.order.and.friends)</code></pre></div>
<p>As beofre we can save this.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">file. &lt;-<span class="st"> "skibiel_primate_fat.csv"</span>

full.path &lt;-<span class="st"> </span>here<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/here/topics/here">here</a></span>(<span class="st">"inst/extdata"</span>, <span class="co">#folder</span>
                        file.)  <span class="co">#file name</span>

<span class="kw">write.csv</span>(milk_primates,
          <span class="dt">file =</span> full.path,
          <span class="dt">row.names =</span>F)</code></pre></div>
<p>These data can also be accessed directly using data(“milk_primates”)</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#load-data">Load data</a></li>
      <li><a href="#remove-columns-from-a-dataframe">Remove columns from a dataframe</a></li>
      <li><a href="#filter-by-rows">Filter by rows</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  
</body>
</html>
